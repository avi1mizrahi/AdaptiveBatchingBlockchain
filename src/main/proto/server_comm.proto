syntax = "proto3";

option java_multiple_files = true;

package ServerCommunication;

import "client_server_comm.proto";

message Tx {
    oneof txType {
        ClientServerCommunication.CreateAccountReq  create      = 1;
        ClientServerCommunication.DeleteAccountReq  delete      = 2;
        ClientServerCommunication.AddAmountReq      addAmount   = 3;
        ClientServerCommunication.GetAmountReq      getAmount   = 4;
        ClientServerCommunication.TransferReq       transfer    = 5;
    }
}

message BlockId {
    uint32 serverId     = 1;
    uint32 serialNumber = 2;
}

message BlockMsg {
    repeated Tx txs = 1;
    BlockId     id  = 2;
}


message PushBlockReq {
    BlockMsg block = 1;
}

message PushBlockRsp {
    bool success = 1;
}


message PullBlockReq {
    BlockId id = 1;
}

message PullBlockRsp {
    bool  success   = 1;
    BlockMsg block     = 2;
}


service Server {
    rpc pushBlock (PushBlockReq ) returns (PushBlockRsp) {}
    rpc pullBlock (PullBlockReq ) returns (PullBlockRsp) {}
}

